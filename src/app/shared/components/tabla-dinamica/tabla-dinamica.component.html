<div class="dynamic-table-container mat-elevation-z8">

  <table mat-table [dataSource]="dataSource" matSort (matSortChange)="sortChange.emit($event)">

    <!-- Columnas generadas dinÃ¡micamente -->
    <ng-container *ngFor="let col of gridConfig.columns" [matColumnDef]="col.id">
      <th
        mat-header-cell
        *matHeaderCellDef
        mat-sort-header
        [disabled]="!col.sortable">
          {{col.title}}
      </th>


      <td mat-cell *matCellDef="let row">
        @switch (col.format) {
          @case ('accion') {
            <ng-container *ngFor="let accion of gridConfig.rowconfig">
              <button mat-icon-button color="{{accion.color}}" (click)="onActionClick(accion.esAccion, row)" [matTooltip]="accion.totooltip ?? '-'">
                <mat-icon>{{ accion.icon }}</mat-icon>
              </button>
            </ng-container>
          }
          @case ('date') {
            <span>{{ row[col.id] | date: 'dd-MM-yyyy' }}</span>
          }
          @case ('currency') {
            <span>{{ row[col.id] | currency: 'MXN' }}</span>
          }
          @default {
            <span>{{ row[col.id] }}</span>
          }
        }
      </td>
    </ng-container>
    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  </table>

    <!-- PAGINADOR [pageSizeOptions]="gridConfig.options.paginationVirtual"-->
  <mat-paginator
    *ngIf="gridConfig.options.pagination"
    [length]="gridConfig.options.pagination.totalItems"
    [pageSize]="gridConfig.options.pagination.pageSize"
    [pageSizeOptions]="gridConfig.options.pagination.pageSizeOptions"
    (page)="gridConfig.options.paginationVirtual ? onVirtualPage($event) : pageChange.emit($event)"
    showFirstLastButtons>
  </mat-paginator>


</div>
